{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% if sport %}{{ sport }}{% else %}{% trans 'Latest News' %}{% endif %}{% endblock title %}

{% block content %}
{% if sport %}
{% if sport.image %}
<img class="sport_type_icon" src="{{ sport.image.url }}" />
{% endif %}
<h1 class="sport_type">{{ sport }}</h1>
{% endif %}

{% for news in news_list %}
{# The first news will always be the highlighted one #}
<article class="news">
  {% if news.sport %}
  <p class="news_date">{{ news.published|date:"Y-m-d" }}</p>
  {% if news.sport.image %}
  <img class="sport_icon" src="{{ news.sport.image.url }}" />
  {% endif %}
  <h3 class="news_sport">{{ news.sport }}</h3>
  {% endif %}
  <h1><a href="{{ news.get_absolute_url }}">{{ news }}</a></h1>
  {% if news.match %}
  <ul class="match_result {% if news.match.is_antagonistic %}antagonistic{% endif %}">
    {% for team_result in news.match.teamresult_set.select_related %}
    <li>{{ team_result.team }} <span class="match_points">{{ team_result.points }}</span></li>
    {% endfor %}
  </ul>
  {% endif %}
  {% if news.image and news.match.is_antagonistic %}
  <img src="{{ news.image.url }}"/>
  {% endif %}
  {{ news.content | truncatewords_html:150 | safe }}
</article>
{% endfor %}

{% include 'pagination.html' with page_obj=page_obj only %}

{% endblock content %}
